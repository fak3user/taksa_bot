# бот такса

## глоссарий

-   _чат_ - отдельный чат в телеграме, куда добавлен бот
-   _счёт_ - событие или череда событий, во время которого считается сумма потраченных средств состоит из _транзакций_
-   _участник_ - пользователь из _чата_, участвубщий в _счёте_
-   _транзакция_ - запись о конкретной трате c указанием суммы, названия, заплатившего и _участников_

## фичи

-   создание нового _счета_ внутри _чата_
-   состояние _счета_

```typescript
{
    id: string;
    title: string; // название _счета_
    transactions: []string // id всех _транзакций_ в _счете_
    participants: []OrderParticipant{
        id: string; // @username или tg_id
    }
}
```

-   добавление _транзакций_ для каждого из участников

```typescript
{
    id: string;
    title: string; // название _транзакции_
    host: string; // @username или tg_id
    sum: number; // сумма
    notes?: string; // пометки
    participants: []TransactionParticipant {
        id: string; // @username или tg_id
        sum: number // сумма для отдельного участника
    }
}
```

-   редактирование _транзакции_
-   личный рассчет суммы
-   возможность указать, что
-   закрытие счета
-   нотифаи для каждого участника при добавлении _транзакции_

## пайплайн

-   Создание нового счета:
    -   Пользователь создает новый счет в чате, указывая название счета.
    -   Бот создает новый объект счета с уникальным идентификатором, названием и пустым списком транзакций и участников.
-   Добавление участников:
    -   Участники в чате могут добавить себя в счет, чтобы участвовать в распределении расходов.
    -   Бот обновляет список участников в объекте счета.
-   Добавление транзакций:
    -   Участники могут добавлять транзакции, указывая название, сумму и участников, которые участвуют в этой транзакции.
    -   Бот создает новую транзакцию и добавляет ее в список транзакций для данного счета.
-   Редактирование транзакции:
    -   Участники могут редактировать уже добавленные транзакции, изменяя сумму или участников.
    -   Бот обновляет информацию о транзакции в объекте счета.
-   Личный расчет суммы:
    -   Участники могут запросить личный расчет, чтобы узнать, кто кому должен или кому нужно вернуть деньги.
    -   Бот анализирует все транзакции и вычисляет, сколько каждый должен или должны вернуть друг другу.
-   Закрытие счета:
    -   Когда все расходы учтены и участники выполнили расчеты, счет может быть закрыт.
    -   Бот помечает счет как закрытый и больше не позволяет добавлять новые транзакции.
-   Уведомления:
    -   Бот отправляет уведомления каждому участнику при добавлении новой транзакции, чтобы участники всегда были в курсе изменений в счете.
